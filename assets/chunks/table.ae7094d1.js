import{P as U,u as S}from"./pagination.0ee93c45.js";import{w as z}from"./install.07dc22a1.js";import{d as C,f as i,e as P,i as F,v as I,o as n,c as s,x as m,F as y,K as h,b as c,W as V,D as x,t as T,_ as q}from"./framework.682d4684.js";const B=z(U),E={data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},pageNum:{type:Number,default:10}},K={class:"table"},L={class:"header-row"},Q=C({__name:"table",props:E,setup(N){const A=N,{data:_,columns:b,pageNum:M}=A,d=i([]),f=i(!1),r=+M,o=i(1),u=i(null),p=P(()=>Math.ceil(_.length/r)),w=i(r*30),R=P(()=>{const t=(o.value-1)*r,l=t+r;return _.slice(t,l)});F(()=>{d.value=Array.from(document.querySelectorAll(".row"));const t=k();t>0&&(w.value=r*t)}),I(()=>{d.value=[]});const k=()=>d.value.length>0?d.value[0].clientHeight:0,H=((t,l)=>{let e;return function(){const v=this,a=arguments;e||(e=setTimeout(()=>{e=null,t.apply(v,a)},l))}})(()=>{if(u.value&&!f.value){const t=u.value.scrollTop,l=u.value.scrollHeight,e=u.value.clientHeight;if(t+e>=l&&o.value!==p.value)f.value=!0,o.value=o.value+1,u.value.scrollTop=0,S(o.value);else{const a=k();if(a>0){const D=Math.floor(t/a),g=Math.ceil(D/r)+1;g!==o.value&&(o.value=g,S(g))}}}f.value=!1},200);return(t,l)=>(n(),s("div",K,[m("div",L,[(n(!0),s(y,null,h(c(b),e=>(n(),s("div",{key:e.key,class:"column"},T(e.label),1))),128))]),m("div",{class:"body",ref_key:"body",ref:u,onScroll:l[0]||(l[0]=(...e)=>c(H)&&c(H)(...e))},[m("div",{class:"body-content",style:V({height:w.value+"px"})},[(n(!0),s(y,null,h(R.value,(e,v)=>(n(),s("div",{key:e.id,class:"row",ref_for:!0,ref:"rowRef_"+v},[(n(!0),s(y,null,h(c(b),a=>(n(),s("div",{key:a.key,class:"column"},T(e[a.key]),1))),128))]))),128))],4)],544),x(c(B),{ref:"pagination",current:o.value,"onUpdate:current":l[1]||(l[1]=e=>o.value=e),total:p.value},null,8,["current","total"]),x(c(B),{ref:"pagination",current:o.value,"onUpdate:current":l[2]||(l[2]=e=>o.value=e),total:p.value,layout:"abridge"},null,8,["current","total"])]))}});const X=q(Q,[["__scopeId","data-v-e968d4f0"]]);export{X as default};
