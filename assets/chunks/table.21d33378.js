import{P as D,u as S}from"./pagination.c6906615.js";import{w as U}from"./install.07dc22a1.js";import{d as z,f as r,i as A,v as C,e as P,o as u,c,x as i,F as h,K as y,W as F,b as f,D as x,t as T,_ as I}from"./framework.682d4684.js";const M=U(D),N={class:"table"},V={class:"header-row"},s=10,q=z({__name:"table",setup(E){const d=r([]),g=r(!1);A(()=>{d.value=Array.from(document.querySelectorAll(".row"));const a=k();a>0&&(w.value=s*a)}),C(()=>{d.value=[]});const _=(a=>{const t=[];for(let e=1;e<=a;e++)t.push({id:e,name:`Person ${e}`,age:Math.floor(Math.random()*100)+1});return t})(90),b=[{key:"name",label:"姓名",width:150,sortable:!0},{key:"age",label:"年龄",width:80,sortable:!1}],o=r(1),n=r(null),m=P(()=>Math.ceil(_.length/s)),w=r(s*30),R=P(()=>{const a=(o.value-1)*s,t=a+s;return _.slice(a,t)}),k=()=>d.value.length>0?d.value[0].clientHeight:0,H=((a,t)=>{let e;return function(){const v=this,l=arguments;e||(e=setTimeout(()=>{e=null,a.apply(v,l)},t))}})(()=>{if(n.value&&!g.value){const a=n.value.scrollTop,t=n.value.scrollHeight,e=n.value.clientHeight;if(a+e>=t&&o.value!==m.value)g.value=!0,setTimeout(()=>{o.value=o.value+1,n.value.scrollTop=0,S(o.value)},1e3);else{const l=k();if(l>0){const B=Math.floor(a/l),p=Math.ceil(B/s)+1;p!==o.value&&(o.value=p,S(p))}}}g.value=!1},200);return(a,t)=>(u(),c("div",N,[i("div",V,[(u(),c(h,null,y(b,e=>i("div",{key:e.key,class:"column"},T(e.label),1)),64))]),i("div",{class:"body",ref_key:"body",ref:n,onScroll:t[0]||(t[0]=(...e)=>f(H)&&f(H)(...e))},[i("div",{class:"body-content",style:F({height:w.value+"px"})},[(u(!0),c(h,null,y(R.value,(e,v)=>(u(),c("div",{key:e.id,class:"row",ref_for:!0,ref:"rowRef_"+v},[(u(),c(h,null,y(b,l=>i("div",{key:l.key,class:"column"},T(e[l.key]),1)),64))]))),128))],4)],544),x(f(M),{ref:"pagination",current:o.value,"onUpdate:current":t[1]||(t[1]=e=>o.value=e),total:m.value},null,8,["current","total"]),x(f(M),{ref:"pagination",current:o.value,"onUpdate:current":t[2]||(t[2]=e=>o.value=e),total:m.value,layout:"abridge"},null,8,["current","total"])]))}});const G=I(q,[["__scopeId","data-v-f7901ec6"]]);export{G as default};
