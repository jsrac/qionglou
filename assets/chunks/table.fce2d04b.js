import{d as D,f as c,i as C,v as z,e as H,o as i,c as u,x as l,F as h,K as g,W as A,b as x,t as S,_ as F}from"./framework.682d4684.js";const q={class:"table"},E={class:"header-row"},I={class:"pagination"},K=["disabled"],L=["disabled"],r=10,N=D({__name:"table",setup(U){const d=c([]),f=c(!1);C(()=>{d.value=Array.from(document.querySelectorAll(".row"));const t=b();t>0&&(y.value=r*t)}),z(()=>{d.value=[]});const m=(t=>{const a=[];for(let e=1;e<=t;e++)a.push({id:e,name:`Person ${e}`,age:Math.floor(Math.random()*100)+1});return a})(40),p=[{key:"name",label:"姓名",width:150,sortable:!0},{key:"age",label:"年龄",width:80,sortable:!1}],o=c(1),n=c(null),_=H(()=>Math.ceil(m.length/r)),y=c(r*30),T=H(()=>{const t=(o.value-1)*r,a=t+r;return m.slice(t,a)}),b=()=>d.value.length>0?d.value[0].clientHeight:0,M=()=>{if(n.value&&!f.value){const t=n.value.scrollTop,a=n.value.scrollHeight,e=n.value.clientHeight;if(t+e>=a&&o.value!==_.value)f.value=!0,setTimeout(()=>{console.log("yes"),o.value=o.value+1,n.value.scrollTop=0},1e3);else{const s=b();if(s>0){const B=Math.floor(t/s),w=Math.ceil(B/r)+1;w!==o.value&&(o.value=w)}}}f.value=!1},P=()=>{o.value>1&&o.value--},R=()=>{o.value<_.value&&o.value++},k=((t,a)=>{let e;return function(){const v=this,s=arguments;e||(e=setTimeout(()=>{e=null,t.apply(v,s)},a))}})(M,200);return(t,a)=>(i(),u("div",q,[l("div",E,[(i(),u(h,null,g(p,e=>l("div",{key:e.key,class:"column"},S(e.label),1)),64))]),l("div",{class:"body",ref_key:"body",ref:n,onScroll:a[0]||(a[0]=(...e)=>x(k)&&x(k)(...e))},[l("div",{class:"body-content",style:A({height:y.value+"px"})},[(i(!0),u(h,null,g(T.value,(e,v)=>(i(),u("div",{key:e.id,class:"row",ref_for:!0,ref:"rowRef_"+v},[(i(),u(h,null,g(p,s=>l("div",{key:s.key,class:"column"},S(e[s.key]),1)),64))]))),128))],4)],544),l("div",I,[l("button",{onClick:P,disabled:o.value===1},"上一页",8,K),l("button",{onClick:R,disabled:o.value===_.value},"下一页",8,L)])]))}});const j=F(N,[["__scopeId","data-v-3e3f022e"]]);export{j as default};
