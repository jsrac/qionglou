import{w as P}from"./install.07dc22a1.js";import R from"./pagination.25f20f45.js";import{d as B,f as r,i as D,v as z,e as S,o as c,c as u,x as i,F as g,K as h,W as A,b as m,D as F,t as x,_ as I}from"./framework.682d4684.js";const N=P(R),U={class:"table"},V={class:"header-row"},n=10,q=B({__name:"table",setup(C){const d=r([]),f=r(!1);D(()=>{d.value=Array.from(document.querySelectorAll(".row"));const t=w();t>0&&(b.value=n*t)}),z(()=>{d.value=[]});const _=(t=>{const o=[];for(let e=1;e<=t;e++)o.push({id:e,name:`Person ${e}`,age:Math.floor(Math.random()*100)+1});return o})(40),p=[{key:"name",label:"姓名",width:150,sortable:!0},{key:"age",label:"年龄",width:80,sortable:!1}],l=r(1),s=r(null),y=S(()=>Math.ceil(_.length/n)),b=r(n*30),T=S(()=>{const t=(l.value-1)*n,o=t+n;return _.slice(t,o)}),w=()=>d.value.length>0?d.value[0].clientHeight:0,k=((t,o)=>{let e;return function(){const v=this,a=arguments;e||(e=setTimeout(()=>{e=null,t.apply(v,a)},o))}})(()=>{if(s.value&&!f.value){const t=s.value.scrollTop,o=s.value.scrollHeight,e=s.value.clientHeight;if(t+e>=o&&l.value!==y.value)f.value=!0,setTimeout(()=>{console.log("yes"),l.value=l.value+1,s.value.scrollTop=0},1e3);else{const a=w();if(a>0){const M=Math.floor(t/a),H=Math.ceil(M/n)+1;H!==l.value&&(l.value=H)}}}f.value=!1},200);return(t,o)=>(c(),u("div",U,[i("div",V,[(c(),u(g,null,h(p,e=>i("div",{key:e.key,class:"column"},x(e.label),1)),64))]),i("div",{class:"body",ref_key:"body",ref:s,onScroll:o[0]||(o[0]=(...e)=>m(k)&&m(k)(...e))},[i("div",{class:"body-content",style:A({height:b.value+"px"})},[(c(!0),u(g,null,h(T.value,(e,v)=>(c(),u("div",{key:e.id,class:"row",ref_for:!0,ref:"rowRef_"+v},[(c(),u(g,null,h(p,a=>i("div",{key:a.key,class:"column"},x(e[a.key]),1)),64))]))),128))],4)],544),F(m(N),{current:l.value,"onUpdate:current":o[1]||(o[1]=e=>l.value=e),total:y.value},null,8,["current","total"])]))}});const j=I(q,[["__scopeId","data-v-d8dbd854"]]);export{j as default};
